<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panelim | GOLD GYS</title>

    <link rel="stylesheet" href="/css/app.css">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%230F172A'/><text x='50' y='70' font-family='serif' font-size='60' fill='%23D4AF37' text-anchor='middle' font-weight='bold'>G</text><text x='80' y='35' font-size='30'>âš–ï¸</text></svg>">

    <style>
        .dashboard-hero {
            background: linear-gradient(135deg, var(--navy-deep) 0%, #1E293B 100%);
            color: white;
            padding: 40px;
            border-radius: 24px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-strong);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .dashboard-hero::before {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 15% 15%, rgba(212,175,55,0.18), transparent 35%),
                        radial-gradient(circle at 85% 10%, rgba(255,255,255,0.12), transparent 30%),
                        radial-gradient(circle at 80% 80%, rgba(212,175,55,0.15), transparent 30%);
            pointer-events: none;
        }
        .dashboard-hero .badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.12);
            padding: 10px 16px;
            border-radius: 999px;
            font-weight: 600;
            color: var(--gold-light);
            letter-spacing: 0.3px;
        }
        .dashboard-hero .actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        .dashboard-hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        .dashboard-hero p {
            color: #cbd5e1;
            max-width: 660px;
            font-size: 1.05rem;
            line-height: 1.6;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }
        .hero-overlay-icon {
            position: absolute;
            right: -14px;
            bottom: -28px;
            font-size: 12rem;
            opacity: 0.05;
            transform: rotate(-15deg);
            pointer-events: none;
        }
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 18px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: white;
            padding: 22px 20px;
            border-radius: 18px;
            box-shadow: var(--shadow-soft);
            border: 1px solid rgba(0,0,0,0.04);
            display: flex;
            gap: 14px;
            align-items: center;
        }
        .stat-icon {
            width: 54px;
            height: 54px;
            border-radius: 14px;
            display: grid;
            place-items: center;
            font-size: 1.6rem;
            font-weight: 700;
        }
        .stat-details .label {
            font-size: 0.9rem;
            color: var(--text-muted);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }
        .stat-details .value {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--navy-deep);
        }
        .stat-details .caption {
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        .content-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 22px;
        }
        .section-card {
            background: white;
            border-radius: 18px;
            padding: 22px;
            box-shadow: var(--shadow-soft);
            border: 1px solid rgba(0,0,0,0.04);
        }
        .section-head {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-bottom: 14px;
        }
        .section-head h3 {
            font-family: 'Playfair Display', serif;
            color: var(--navy-deep);
            font-size: 1.2rem;
        }
        .section-head span { color: var(--text-muted); font-size: 0.9rem; }
        .module-list, .activity-list, .calendar-list { display: flex; flex-direction: column; gap: 12px; }
        .module-card {
            border: 1px solid rgba(0,0,0,0.04);
            border-radius: 14px;
            padding: 14px 16px;
            background: #f8fafc;
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 8px;
            align-items: center;
        }
        .module-card .title { font-weight: 700; color: var(--navy-deep); }
        .module-card .meta { color: var(--text-muted); font-size: 0.9rem; }
        .chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 10px;
            border-radius: 999px;
            background: white;
            color: var(--navy-deep);
            border: 1px solid rgba(0,0,0,0.06);
            font-weight: 600;
            font-size: 0.9rem;
        }
        .progress-bar {
            height: 10px;
            background: rgba(15, 23, 42, 0.08);
            border-radius: 999px;
            overflow: hidden;
            margin-top: 8px;
        }
        .progress-bar span {
            display: block;
            height: 100%;
            background: linear-gradient(90deg, var(--gold-main), var(--gold-dark));
        }
        .activity-item {
            display: flex;
            gap: 12px;
            padding: 12px 10px;
            border-radius: 12px;
            border: 1px solid rgba(0,0,0,0.04);
            align-items: center;
            background: #f8fafc;
        }
        .activity-icon {
            width: 38px; height: 38px;
            border-radius: 10px;
            display: grid; place-items: center;
            font-size: 1.2rem;
            background: rgba(212, 175, 55, 0.15);
        }
        .activity-text { flex: 1; }
        .activity-text .title { font-weight: 700; color: var(--navy-deep); }
        .activity-text .time { color: var(--text-muted); font-size: 0.9rem; }
        .calendar-card { background: var(--navy-deep); color: white; position: relative; overflow: hidden; }
        .calendar-card::after {
            content: "";
            position: absolute;
            top: -40px; right: -40px;
            width: 120px; height: 120px;
            background: var(--gold-main);
            opacity: 0.08;
            border-radius: 50%;
        }
        .calendar-list .event {
            padding: 12px 14px;
            border-radius: 12px;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.08);
        }
        .event strong { color: var(--gold-light); }
        .quick-actions { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; }
        .quick-actions a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 14px;
            background: #f8fafc;
            border: 1px solid rgba(0,0,0,0.05);
            border-radius: 12px;
            font-weight: 700;
            color: var(--navy-deep);
        }
        .quick-actions a:hover { background: white; box-shadow: var(--shadow-soft); }
        .insight-card {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 1px solid rgba(212, 175, 55, 0.35);
            color: #78350f;
        }
        @media (max-width: 1100px) { .content-grid { grid-template-columns: 1fr; } .app-main { margin-left: 0; width: 100%; } .app-sidebar { display: none; } }
        @media (max-width: 640px) { .dashboard-hero { padding: 28px; } .stat-grid { grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); } }
    </style>
</head>
<body>

    <div class="app-layout">

        <aside id="sidebar-area" class="app-sidebar"></aside>

        <main class="app-main">

            <header id="header-area" class="app-header"></header>

            <div class="app-content">

                <section class="dashboard-hero">
                    <div class="badge">âš¡ GYS HÄ±zlandÄ±rÄ±cÄ± Â· SÃ¼rÃ¼m 1.0</div>
                    <h1>HoÅŸ Geldiniz, <span id="dashUserName" style="color: var(--gold-main);">Kaptan</span> ğŸ‘‘</h1>
                    <p>
                        GÃ¼nlÃ¼k hedeflerinize odaklanÄ±n, eksik konularÄ±nÄ±zÄ± tamamlayÄ±n ve deneme sÄ±navlarÄ±yla seviyenizi gÃ¶rÃ¼n.
                        YolculuÄŸunuza kaldÄ±ÄŸÄ±nÄ±z yerden devam edebilmeniz iÃ§in her ÅŸey hazÄ±r.
                    </p>
                    <div class="actions">
                        <a href="testler.html" class="btn-gold">ğŸ“ Hemen Test Ã‡Ã¶z</a>
                        <a href="denemeler.html" class="btn-navy">ğŸ† Deneme SÄ±navÄ±</a>
                        <a href="yanlislarim.html" class="chip" aria-label="YanlÄ±ÅŸlarÄ±m">âš ï¸ YanlÄ±ÅŸlar</a>
                        <a href="favoriler.html" class="chip" aria-label="Favori sorular">â­ Favoriler</a>
                    </div>
                    <div class="hero-overlay-icon">âš–ï¸</div>
                </section>

                <section class="stat-grid">
                    <article class="stat-card">
                        <div class="stat-icon" style="background: var(--gold-light); color: var(--gold-dark);">ğŸ“š</div>
                        <div class="stat-details">
                            <div class="label">Ã‡Ã¶zÃ¼len Soru</div>
                            <div class="value" id="statSolved">0</div>
                            <div class="caption">Bu hafta hedefin 1000 soru.</div>
                        </div>
                    </article>
                    <article class="stat-card">
                        <div class="stat-icon" style="background: #ECFDF5; color: var(--success);">ğŸ¯</div>
                        <div class="stat-details">
                            <div class="label">BaÅŸarÄ± OranÄ±</div>
                            <div class="value" id="statAccuracy">%0</div>
                            <div class="caption">DoÄŸru yanÄ±t yÃ¼zdesi.</div>
                        </div>
                    </article>
                    <article class="stat-card">
                        <div class="stat-icon" style="background: #EFF6FF; color: #1D4ED8;">ğŸ”¥</div>
                        <div class="stat-details">
                            <div class="label">Ã‡alÄ±ÅŸma Serisi</div>
                            <div class="value" id="statStreak">0 gÃ¼n</div>
                            <div class="caption">AralÄ±ksÄ±z ilerleme.</div>
                        </div>
                    </article>
                    <article class="stat-card">
                        <div class="stat-icon" style="background: #FEF2F2; color: #DC2626;">ğŸ…</div>
                        <div class="stat-details">
                            <div class="label">SÄ±ralama</div>
                            <div class="value" id="statRank">-</div>
                            <div class="caption">Topluluk performansÄ±n.</div>
                        </div>
                    </article>
                </section>

                <section class="content-grid">
                    <div class="column">
                        <article class="section-card">
                            <div class="section-head">
                                <h3>Ã‡alÄ±ÅŸma PlanÄ±</h3>
                                <span>Bu haftanÄ±n odak konularÄ±</span>
                            </div>
                            <div id="moduleList" class="module-list" aria-live="polite"></div>
                        </article>

                        <article class="section-card" style="margin-top: 16px;">
                            <div class="section-head">
                                <h3>Son Aktiviteler</h3>
                                <span>GÃ¼nlÃ¼k ilerleme kayÄ±tlarÄ±</span>
                            </div>
                            <div id="activityList" class="activity-list" aria-live="polite"></div>
                        </article>
                    </div>

                    <div class="column" style="display: flex; flex-direction: column; gap: 16px;">
                        <article class="section-card insight-card">
                            <div class="section-head" style="margin-bottom: 6px;">
                                <h3 style="color: #92400e;">HaftalÄ±k Ã–neri</h3>
                                <span style="color: #b45309;">Fark yaratacak ipucu</span>
                            </div>
                            <p style="color: #713f12; margin-bottom: 8px;">
                                KarmaÅŸÄ±k konularÄ± kÃ¼Ã§Ã¼k bloklara bÃ¶l ve her blok iÃ§in 25 dakikalÄ±k odaklÄ± Ã§alÄ±ÅŸma planla. Blok bitiminde
                                5 dakikalÄ±k kÄ±sa Ã¶zet yazarak Ã¶ÄŸrenmeni pekiÅŸtir.
                            </p>
                            <div class="chip" style="background: white; color: #92400e; border-color: rgba(180,83,9,0.4);">â³ Pomodoro</div>
                        </article>

                        <article class="section-card">
                            <div class="section-head">
                                <h3>HÄ±zlÄ± Ä°ÅŸlemler</h3>
                                <span>Tek dokunuÅŸla baÅŸla</span>
                            </div>
                            <div class="quick-actions">
                                <a href="testler.html">ğŸ§  Yeni Test</a>
                                <a href="denemeler.html">ğŸ“… Deneme</a>
                                <a href="yanlislarim.html">âš ï¸ YanlÄ±ÅŸlarÄ±m</a>
                                <a href="favoriler.html">â­ Favoriler</a>
                                <a href="/">ğŸ° Anasayfa</a>
                                <a href="/profil.html">ğŸ‘¤ Profilim</a>
                            </div>
                        </article>

                        <article class="section-card calendar-card">
                            <div class="section-head">
                                <h3 style="color: var(--gold-main);">SÄ±nav Takvimi</h3>
                                <span style="color: rgba(255,255,255,0.8);">YaklaÅŸan tarihler</span>
                            </div>
                            <div id="calendarList" class="calendar-list"></div>
                        </article>
                    </div>
                </section>

            </div>
        </main>
    </div>

    <script type="module">
        import { initLayout } from '/js/ui-loader.js';
        import { auth } from '/js/firebase-config.js';
        import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        initLayout('dashboard');

        const statNumbers = {
            solved: 842,
            accuracy: 88,
            streak: 12,
            rank: 18
        };

        const modules = [
            { title: 'TYT Matematik', completion: 72, target: '1 Mart', tags: ['Problem', 'Fonksiyon'] },
            { title: 'VatandaÅŸlÄ±k Bilgisi', completion: 46, target: '4 Mart', tags: ['Hukuk', 'GÃ¼ncel'] },
            { title: 'TÃ¼rkÃ§e Paragraf', completion: 90, target: '28 Åubat', tags: ['Zaman YÃ¶netimi'] },
            { title: 'CoÄŸrafya Haritalar', completion: 38, target: '6 Mart', tags: ['Harita', 'Kavram'] }
        ];

        const activities = [
            { icon: 'âœ…', title: '15 soruluk deneme tamamlandÄ±', time: 'BugÃ¼n Â· 09:45' },
            { icon: 'â­', title: 'Favorilere 3 soru eklendi', time: 'DÃ¼n Â· 20:10' },
            { icon: 'ğŸ§ ', title: 'Ã‡Ã¶zÃ¼len test: MantÄ±k ve Paragraf', time: 'DÃ¼n Â· 17:30' },
            { icon: 'ğŸ“Œ', title: 'Hedef belirlendi: 1000 soru / hafta', time: 'Pazartesi Â· 08:00' }
        ];

        const events = [
            { title: 'GYS Deneme SÄ±navÄ± - 4', date: '9 Mart 2024', note: 'Sabah 10:00 Â· Ã‡evrimiÃ§i' },
            { title: 'Ã‡Ä±kmÄ±ÅŸ Sorular KampÄ±', date: '15 Mart 2024', note: 'CanlÄ± oturum Â· 19:30' },
            { title: 'Genel Tarama', date: '23 Mart 2024', note: 'SonuÃ§ analizi raporu' }
        ];

        function renderStats() {
            document.getElementById('statSolved').innerText = statNumbers.solved.toLocaleString('tr-TR');
            document.getElementById('statAccuracy').innerText = `%${statNumbers.accuracy}`;
            document.getElementById('statStreak').innerText = `${statNumbers.streak} gÃ¼n`;
            document.getElementById('statRank').innerText = `#${statNumbers.rank}`;
        }

        function renderModules() {
            const container = document.getElementById('moduleList');
            container.innerHTML = '';

            modules.forEach((module) => {
                const item = document.createElement('div');
                item.className = 'module-card';
                item.innerHTML = `
                    <div>
                        <div class="title">${module.title}</div>
                        <div class="meta">Hedef tarih: ${module.target}</div>
                        <div class="progress-bar" aria-label="Tamamlanma oranÄ± ${module.completion}%">
                            <span style="width: ${module.completion}%"></span>
                        </div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 8px; align-items: flex-end;">
                        <div class="chip">${module.completion}%</div>
                        ${module.tags.map((tag) => `<div class="chip" style="background:#e2e8f0;">#${tag}</div>`).join('')}
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function renderActivities() {
            const container = document.getElementById('activityList');
            container.innerHTML = '';

            activities.forEach((activity) => {
                const item = document.createElement('div');
                item.className = 'activity-item';
                item.innerHTML = `
                    <div class="activity-icon">${activity.icon}</div>
                    <div class="activity-text">
                        <div class="title">${activity.title}</div>
                        <div class="time">${activity.time}</div>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function renderCalendar() {
            const container = document.getElementById('calendarList');
            container.innerHTML = '';

            events.forEach((event) => {
                const item = document.createElement('div');
                item.className = 'event';
                item.innerHTML = `
                    <strong>${event.title}</strong>
                    <div style="opacity: 0.85;">${event.date}</div>
                    <div style="color: rgba(255,255,255,0.8); font-size: 0.9rem;">${event.note}</div>
                `;
                container.appendChild(item);
            });
        }

        renderStats();
        renderModules();
        renderActivities();
        renderCalendar();

        onAuthStateChanged(auth, (user) => {
            if (user) {
                const nameEl = document.getElementById("dashUserName");
                if (user.displayName) {
                    nameEl.innerText = user.displayName;
                } else if (user.email) {
                    const name = user.email.split('@')[0];
                    nameEl.innerText = name.charAt(0).toUpperCase() + name.slice(1);
                }
            } else {
                window.location.href = "/login.html";
            }
        });
    </script>

</body>
</html>
