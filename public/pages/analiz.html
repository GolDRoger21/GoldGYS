<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performans Analizi | GOLD GYS</title>
    <link rel="stylesheet" href="../styles/tokens.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/dashboard.css">
    <link rel="stylesheet" href="../css/app.css">
    <!-- Chart.js K√ºt√ºphanesi -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="icon" type="image/png" href="../icons/favicon.png">
    <link rel="manifest" href="/manifest.json">
</head>

<body>
    <script type="module">
        import { initLayout } from '../js/ui-loader.js';
        document.addEventListener('DOMContentLoaded', () => initLayout());
    </script>

    <div class="dashboard-container">
        <!-- Header -->
        <div class="section-header" style="margin-bottom: 30px; display: flex; justify-content: space-between; align-items: flex-end;">
            <div>
                <h2 class="premium-gold-text" style="font-size: 2rem; margin-bottom: 8px;">Performans Karnesi</h2>
                <p class="text-muted">Geli≈üim s√ºrecinizi ve eksik olduƒüunuz konularƒ± profesyonelce analiz edin.</p>
            </div>
            <div class="status-pill status-in-progress" id="lastUpdate">
                G√ºncelleniyor...
            </div>
        </div>

        <!-- Bento Grid Layout -->
        <div class="bento-grid">
            
            <!-- 1. Hero: Predictive Score (Sol √úst) -->
            <div class="glass-card col-span-4 row-span-2" style="position: relative; overflow: hidden;">
                <div class="card-body hero-metric-container">
                    <div>
                        <div class="metric-label">Tahmini Puan</div>
                        <div class="metric-big-value" id="predictedScore">--</div>
                        <p class="text-muted" style="margin-top: 10px; font-size: 0.9rem;">
                            Son 5 sƒ±nav aƒüƒ±rlƒ±klƒ± ortalamasƒ±
                        </p>
                    </div>
                    <!-- Dekoratif Arkaplan -->
                    <div style="position: absolute; right: -20px; bottom: -20px; font-size: 8rem; opacity: 0.03;">üèÜ</div>
                </div>
            </div>

            <!-- 2. Hero: Level Progress (Orta/Saƒü √úst) -->
            <div class="glass-card col-span-8 row-span-2">
                <div class="card-header">
                    <div class="card-title">
                        <span>üöÄ G√∂revde Y√ºkselme</span>
                    </div>
                    <div class="status-pill status-completed" id="currentLevelBadge">Ba≈ülangƒ±√ß</div>
                </div>
                <div class="card-body">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                        <div>
                            <span class="text-muted" style="font-size: 0.85rem;">Mevcut Seviye</span>
                            <div style="font-size: 1.4rem; font-weight: 700; color: var(--text-light);" id="currentLevel">Seviye 1</div>
                        </div>
                        <div style="text-align: right;">
                             <span class="text-muted" style="font-size: 0.85rem;">Toplam XP</span>
                             <div style="font-size: 1.4rem; font-weight: 700; color: var(--gold-main);" id="currentLevelXp">0 XP</div>
                        </div>
                    </div>
                    
                    <div class="progress-bar-container" style="height: 12px; background: rgba(255,255,255,0.05);">
                        <div id="levelProgressBar" class="progress-bar" style="width: 0%; background: linear-gradient(90deg, var(--gold-dark), var(--gold-light));"></div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-top: 8px; font-size: 0.85rem; color: var(--text-muted);">
                        <span id="levelProgressText">0 / 0 XP</span>
                        <span id="levelNextTarget">Sonraki: -</span>
                    </div>

                    <div style="margin-top: 24px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.05);">
                        <div style="font-weight: 600; color: var(--text-muted); margin-bottom: 12px; font-size: 0.9rem;">HAFTALIK G√ñREVLER</div>
                        <div id="missionList" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
                            <!-- JS ile dolacak -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. KPI Cards (Orta Bant) -->
            <div class="glass-card col-span-3">
                <div class="kpi-stat-card">
                    <div class="kpi-title">TOPLAM DENEME</div>
                    <div class="kpi-value premium-gold-text" id="totalExams">0</div>
                    <div class="bg-icon">üìù</div>
                </div>
            </div>
            
            <div class="glass-card col-span-3">
                 <div class="kpi-stat-card">
                    <div class="kpi-title">ORTALAMA BA≈ûARI</div>
                    <div class="kpi-value" style="color: var(--color-success);" id="avgScore">%0</div>
                    <div class="bg-icon">üéØ</div>
                </div>
            </div>

            <div class="glass-card col-span-3">
                 <div class="kpi-stat-card">
                    <div class="kpi-title">√á√ñZ√úLEN SORU</div>
                    <div class="kpi-value" style="color: #3b82f6;" id="totalQuestions">0</div>
                    <div class="bg-icon">‚ö°</div>
                </div>
            </div>

            <div class="glass-card col-span-3">
                 <div class="kpi-stat-card">
                    <div class="kpi-title">HATA ORANI</div>
                    <div class="kpi-value" style="color: var(--color-danger);" id="wrongRate">%0</div>
                    <div class="bg-icon">‚ö†Ô∏è</div>
                </div>
            </div>

            <!-- 4. Charts (Alt Bant) -->
            <div class="glass-card col-span-8">
                <div class="card-header">
                    <div class="card-title">üìà Geli≈üim Grafiƒüi (Son 10 Sƒ±nav)</div>
                </div>
                <div class="card-body" style="height: 320px;">
                    <canvas id="progressChart"></canvas>
                </div>
            </div>

            <div class="glass-card col-span-4">
                <div class="card-header">
                    <div class="card-title">üéØ Konu Zayƒ±flƒ±k Analizi</div>
                </div>
                <div class="card-body" style="height: 320px;">
                     <canvas id="topicChart"></canvas>
                </div>
            </div>
            
            <!-- 5. Topic Mastery Center (En Alt - Geni≈ü) -->
            <div class="glass-card col-span-12">
                <div class="card-header">
                    <div class="card-title">
                        <span>üìö Konu Hakimiyet Merkezi</span>
                    </div>
                    <!-- Filtreler -->
                    <div class="chip-group" id="topicFilterChips" style="display: flex; gap: 8px;">
                         <button class="status-pill status-in-progress" style="cursor: pointer; border:none;" data-filter="all">T√ºm√º</button>
                         <button class="status-pill status-pending" style="cursor: pointer; border:none; background: transparent; color: var(--text-muted);" data-filter="in_progress">√áalƒ±≈üƒ±lanlar</button>
                         <button class="status-pill status-pending" style="cursor: pointer; border:none; background: transparent; color: var(--text-muted);" data-filter="completed">Tamamlananlar</button>
                         <button class="status-pill status-pending" style="cursor: pointer; border:none; background: transparent; color: var(--text-muted);" data-filter="pending">Bekleyenler</button>
                    </div>
                </div>
                <div class="card-body" style="padding: 0;">
                    <div class="mastery-table-container">
                        <table class="mastery-table">
                            <thead>
                                <tr>
                                    <th style="width: 40%;">KONU Bƒ∞LGƒ∞Sƒ∞</th>
                                    <th style="width: 25%;">BA≈ûARI ORANI</th>
                                    <th style="width: 20%;">DURUM</th>
                                    <th style="width: 15%; text-align: right;">ƒ∞≈ûLEMLER</th>
                                </tr>
                            </thead>
                            <tbody id="topicMasteryList">
                                <!-- JS ile dolacak -->
                                <tr>
                                    <td colspan="4" class="text-center" style="padding: 40px; color: var(--text-muted);">
                                        Veriler y√ºkleniyor...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Sƒ±nav Ge√ßmi≈üi (Opsiyonel / Ek) -->
             <div class="glass-card col-span-12">
                <div class="card-header">
                    <div class="card-title">üìú Son Sƒ±navlar</div>
                </div>
                <div class="card-body">
                     <div class="table-responsive">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Tarih</th>
                                    <th>Sƒ±nav Adƒ±</th>
                                    <th>Sonu√ßlar</th>
                                    <th>Puan</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script type="module" src="../js/analysis.js"></script>
</body>

</html>
