<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YardÄ±m Merkezi | GOLD GYS</title>
  <link rel="stylesheet" href="../styles/tokens.css">
  <link rel="stylesheet" href="../css/layout.css">
  <link rel="stylesheet" href="../css/dashboard.css">
  <link rel="manifest" href="/manifest.json">
  <style>
    /* --- YARDIM SAYFASI Ã–ZEL STÄ°LLERÄ° --- */
    .help-hero {
      text-align: center;
      padding: 40px 20px;
      background: linear-gradient(135deg, var(--bg-surface), var(--bg-body));
      border-bottom: 1px solid var(--border-color);
      margin-bottom: 30px;
    }

    .help-hero h1 {
      font-size: 2rem;
      margin-bottom: 10px;
      color: var(--text-main);
    }

    .help-hero p {
      color: var(--text-muted);
      max-width: 600px;
      margin: 0 auto;
    }

    .help-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      max-width: 1000px;
      margin: 0 auto;
    }

    /* SSS Akordeon */
    .faq-item {
      background: var(--bg-surface);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-md);
      margin-bottom: 10px;
      overflow: hidden;
    }

    .faq-question {
      padding: 15px 20px;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--bg-hover);
      color: var(--text-main);
    }

    .faq-answer {
      padding: 0 20px;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, padding 0.3s ease;
      color: var(--text-muted);
      line-height: 1.6;
    }

    .faq-item.active .faq-answer {
      padding: 15px 20px;
      max-height: 200px;
      /* Yeterince bÃ¼yÃ¼k bir deÄŸer */
    }

    .faq-icon {
      transition: transform 0.3s;
    }

    .faq-item.active .faq-icon {
      transform: rotate(180deg);
    }

    /* Ä°letiÅŸim Formu */
    .contact-card {
      background: var(--bg-surface);
      padding: 25px;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-color);
      box-shadow: var(--shadow-sm);
    }

    /* HÄ±zlÄ± Ä°letiÅŸim ButonlarÄ± */
    .quick-contact {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      justify-content: center;
    }

    .qc-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      border-radius: var(--radius-full);
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9rem;
      transition: transform 0.2s;
    }

    .qc-btn:hover {
      transform: translateY(-2px);
    }

    .qc-whatsapp {
      background: #25D366;
      color: white;
    }

    .qc-telegram {
      background: #0088cc;
      color: white;
    }

    @media (max-width: 768px) {
      .help-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <script type="module">
    import { initLayout } from '../js/ui-loader.js';
    document.addEventListener('DOMContentLoaded', () => initLayout());
  </script>

  <div class="help-hero">
    <h1>NasÄ±l YardÄ±mcÄ± Olabiliriz?</h1>
    <p>SÄ±kÃ§a sorulan sorularÄ± inceleyin veya doÄŸrudan bizimle iletiÅŸime geÃ§in.</p>

    <div class="quick-contact">
      <a href="https://wa.me/905555555555" target="_blank" class="qc-btn qc-whatsapp">
        <span>ğŸ“±</span> WhatsApp Destek
      </a>
      <a href="https://t.me/goldgys" target="_blank" class="qc-btn qc-telegram">
        <span>âœˆï¸</span> Telegram Grubu
      </a>
    </div>
  </div>

  <div class="dashboard-container">
    <div class="help-grid">
      <!-- SOL KOLON: SSS -->
      <div>
        <h3 class="section-title">SÄ±kÃ§a Sorulan Sorular</h3>

        <div class="faq-item">
          <div class="faq-question" onclick="toggleFaq(this)">
            Sisteme nasÄ±l Ã¼ye olabilirim?
            <span class="faq-icon">â–¼</span>
          </div>
          <div class="faq-answer">
            Google hesabÄ±nÄ±zla giriÅŸ yaparak otomatik Ã¼yelik oluÅŸturabilirsiniz. ÃœyeliÄŸiniz yÃ¶netici onayÄ± sonrasÄ±
            aktifleÅŸecektir.
          </div>
        </div>

        <div class="faq-item">
          <div class="faq-question" onclick="toggleFaq(this)">
            Åifremi unuttum, ne yapmalÄ±yÄ±m?
            <span class="faq-icon">â–¼</span>
          </div>
          <div class="faq-answer">
            GiriÅŸ sayfasÄ±ndaki "Åifremi Unuttum" baÄŸlantÄ±sÄ±nÄ± kullanarak veya Profil sayfasÄ±ndan ÅŸifre sÄ±fÄ±rlama
            e-postasÄ± talep edebilirsiniz.
          </div>
        </div>

        <div class="faq-item">
          <div class="faq-question" onclick="toggleFaq(this)">
            Deneme sÄ±navlarÄ± ne zaman yayÄ±nlanÄ±r?
            <span class="faq-icon">â–¼</span>
          </div>
          <div class="faq-answer">
            Deneme sÄ±navlarÄ± haftalÄ±k olarak sisteme yÃ¼klenmektedir. Yeni sÄ±nav eklendiÄŸinde bildirim alÄ±rsÄ±nÄ±z.
          </div>
        </div>

        <div class="faq-item">
          <div class="faq-question" onclick="toggleFaq(this)">
            Mobil uygulama var mÄ±?
            <span class="faq-icon">â–¼</span>
          </div>
          <div class="faq-answer">
            Sitemiz PWA (Progressive Web App) uyumludur. TarayÄ±cÄ± menÃ¼sÃ¼nden "Ana Ekrana Ekle" diyerek uygulama gibi
            kullanabilirsiniz.
          </div>
        </div>
      </div>

      <!-- SAÄ KOLON: Ä°letiÅŸim Formu -->
      <div>
        <h3 class="section-title">Bize YazÄ±n</h3>
        <div class="contact-card">
          <form id="contactForm">
            <div class="form-group">
              <label>Konu</label>
              <select id="inpSubject" class="form-control">
                <option value="Genel">Genel Sorular</option>
                <option value="Teknik">Teknik Sorun Bildirimi</option>
                <option value="Ä°Ã§erik">Soru/Ä°Ã§erik HatasÄ±</option>
                <option value="Ã–neri">Ã–neri ve Ä°stek</option>
              </select>
            </div>

            <div class="form-group">
              <label>MesajÄ±nÄ±z</label>
              <textarea id="inpMessage" class="form-control" rows="5" placeholder="LÃ¼tfen detaylÄ± bilgi verin..."
                required></textarea>
            </div>

            <button type="submit" class="btn btn-primary w-100">GÃ¶nder</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { db, auth } from '../js/firebase-config.js';
    import { collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // SSS Akordeon Fonksiyonu
    window.toggleFaq = (element) => {
      const item = element.parentElement;
      const isActive = item.classList.contains('active');

      // DiÄŸerlerini kapat (Opsiyonel)
      document.querySelectorAll('.faq-item').forEach(el => el.classList.remove('active'));

      if (!isActive) {
        item.classList.add('active');
      }
    };

    // Form GÃ¶nderimi
    document.getElementById('contactForm').addEventListener('submit', async (e) => {
      e.preventDefault();

      if (!auth.currentUser) {
        alert("Mesaj gÃ¶ndermek iÃ§in giriÅŸ yapmalÄ±sÄ±nÄ±z.");
        return;
      }

      const btn = e.target.querySelector('button');
      const originalText = btn.innerText;
      btn.disabled = true;
      btn.innerText = "GÃ¶nderiliyor...";

      try {
        await addDoc(collection(db, "reports"), {
          userId: auth.currentUser.uid,
          userEmail: auth.currentUser.email,
          type: document.getElementById('inpSubject').value, // 'type' alanÄ± admin panelinde kullanÄ±lÄ±yor
          description: document.getElementById('inpMessage').value, // 'description' alanÄ± admin panelinde kullanÄ±lÄ±yor
          status: 'pending',
          createdAt: serverTimestamp(),
          source: 'help_page'
        });

        alert("MesajÄ±nÄ±z baÅŸarÄ±yla iletildi. En kÄ±sa sÃ¼rede dÃ¶nÃ¼ÅŸ yapacaÄŸÄ±z.");
        e.target.reset();
      } catch (error) {
        console.error("Hata:", error);
        alert("Bir hata oluÅŸtu: " + error.message);
      } finally {
        btn.disabled = false;
        btn.innerText = originalText;
      }
    });
  </script>
</body>

</html>