<!DOCTYPE html>
<html lang="tr">

<head>
    <script src="/js/theme-init.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deneme Sınavları | GOLD GYS</title>
    <link rel="stylesheet" href="../styles/tokens.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/dashboard.css">
    <style>
        body {
            visibility: hidden;
        }

        .denemeler-page {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }

        .deneme-hero {
            /* HAFİF BİR ALTIN GRADIENT: Siyahtan -> Koyu Altın Tonuna */
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(15, 23, 42, 1) 90%);
            border: 1px solid rgba(212, 175, 55, 0.25);
            border-radius: var(--radius-lg);
            padding: 32px;
            color: var(--text-main);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 28px;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.1);
            position: relative;
            overflow: hidden;
        }

        /* Arkaplana hafif bir ışıltı efekti */
        .deneme-hero::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.08) 0%, transparent 60%);
            pointer-events: none;
            z-index: 0;
        }

        .deneme-hero>* {
            position: relative;
            z-index: 1;
        }

        .deneme-hero h1 {
            font-size: 2rem;
            margin-bottom: 12px;
            font-family: var(--font-family-serif);
            color: var(--color-primary);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .deneme-hero p {
            opacity: 0.9;
            margin-bottom: 20px;
            color: var(--text-muted);
        }

        .hero-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .hero-panel {
            background: rgba(15, 23, 42, 0.6);
            border-radius: var(--radius-lg);
            padding: 20px;
            display: grid;
            gap: 12px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            backdrop-filter: blur(10px);
        }

        .hero-panel-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--text-main);
        }

        .hero-panel-item .label {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .hero-panel-item .value {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--color-primary);
        }

        .info-section {
            background: var(--bg-surface);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 24px;
            box-shadow: var(--shadow-sm);
        }

        .section-header {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .section-header h2 {
            font-size: 1.3rem;
            margin-bottom: 6px;
            color: var(--text-main);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
        }

        .info-card {
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 16px;
            background: var(--bg-hover);
        }

        .info-card h3 {
            font-size: 1rem;
            margin-bottom: 8px;
            color: var(--color-primary);
        }

        .info-card p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .pill-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .pill {
            background: var(--bg-hover);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            padding: 6px 12px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-main);
        }

        .exam-list-section {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .filter-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .filter-field {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .filter-field input,
        .filter-field select {
            padding: 10px 12px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            background: var(--bg-input);
            color: var(--text-main);
        }

        .filter-field label {
            color: var(--text-muted);
        }

        .exam-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
        }

        .exam-card {
            background: var(--bg-surface);
            border: 1px solid var(--border-color);
            border-radius: 18px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 14px;
            box-shadow: var(--shadow-sm);
            transition: transform 0.2s, border-color 0.2s;
        }

        .exam-card:hover {
            transform: translateY(-4px);
            border-color: var(--color-primary);
        }

        .exam-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

        .exam-card h3 {
            color: var(--text-main);
        }

        .exam-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .exam-card-actions {
            margin-top: auto;
        }

        .exam-highlight {
            border: 1px solid var(--color-primary);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.15);
        }

        .empty-state {
            padding: 32px;
            text-align: center;
            border: 1px dashed var(--border-color);
            border-radius: 16px;
            color: var(--text-muted);
        }

        .skeleton {
            height: 160px;
            border-radius: 16px;
            background: linear-gradient(90deg, var(--bg-hover) 25%, var(--bg-surface) 37%, var(--bg-hover) 63%);
            background-size: 400% 100%;
            animation: shimmer 1.4s ease infinite;
        }

        @keyframes shimmer {
            0% {
                background-position: 100% 0;
            }

            100% {
                background-position: -100% 0;
            }
        }

        /* --- LIGHT THEME OVERRIDES --- */
        [data-theme="light"] .deneme-hero {
            background: linear-gradient(135deg, #FFF9E5 0%, #FFFFFF 100%);
            border-color: #E8D29A;
            box-shadow: 0 4px 20px rgba(212, 175, 55, 0.15);
        }

        [data-theme="light"] .deneme-hero h1 {
            color: #856d20;
            text-shadow: none;
        }

        [data-theme="light"] .deneme-hero p {
            color: #856d20;
            opacity: 0.8;
        }

        [data-theme="light"] .hero-panel {
            background: rgba(255, 255, 255, 0.7);
            border-color: #E8D29A;
        }

        [data-theme="light"] .hero-panel-item .value {
            color: #856d20;
        }

        [data-theme="light"] .hero-panel-item .label {
            color: #B5952F;
        }

        [data-theme="light"] .exam-highlight {
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.25);
        }

        /* Mobil düzeltmeleri */
        @media (max-width: 768px) {
            .deneme-hero {
                padding: 24px;
                /* Daha yumuşak gradient mobil için */
                background: linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(15, 23, 42, 1) 100%);
            }

            .hero-panel {
                /* order: -1; Mobilde panel sayılarının başlığın üzerine çıkması kafa karıştırıcı olabilir, kaldırıldı. */
                margin-top: 12px;
                background: rgba(15, 23, 42, 0.8);
                /* Daha okunabilir arka plan */
            }

            .filter-bar {
                flex-direction: column;
                align-items: stretch;
            }

            .filter-field input,
            .filter-field select {
                width: 100%;
                padding: 12px;
                /* Touch friendly */
            }

            .deneme-hero h1 {
                font-size: 1.75rem;
            }

            /* Ensure grid wraps nicely */
            .info-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <link rel="icon" type="image/png" href="../icons/favicon.png">
    <link rel="manifest" href="/manifest.json">
</head>

<body>
    <!-- UI Loader: Layout, Header, Sidebar ve Auth Yönetimi -->
    <script type="module">
        import { initLayout } from '../js/ui-loader.js';
        document.addEventListener('DOMContentLoaded', () => {
            initLayout();
        });
    </script>

    <div class="dashboard-container denemeler-page">
        <section class="deneme-hero">
            <div>
                <span class="badge bg-purple-subtle">Otomatik Deneme Sistemi</span>
                <h1>Deneme Sınavları</h1>
                <p>Denemeler, aktif soru havuzundan mevzuat şablonuna göre seçilir. Sistem 75 soruluk dağılımı tamamlar,
                    kalan 5 soruyu da rastgele ekleyerek 80 soruluk gerçek sınav formatını oluşturur.</p>
                <div class="hero-actions">
                    <a href="#examListSection" class="btn btn-dark">Denemeleri Gör</a>
                    <a href="/test" class="btn btn-light">Konu Bazlı Teste Geç</a>
                </div>
            </div>
            <div class="hero-panel">
                <div class="hero-panel-item">
                    <span class="label">Yayınlanan Deneme</span>
                    <span class="value" id="statExamCount">0</span>
                </div>
                <div class="hero-panel-item">
                    <span class="label">Toplam Soru</span>
                    <span class="value" id="statQuestionCount">0</span>
                </div>
                <div class="hero-panel-item">
                    <span class="label">Ortalama Süre</span>
                    <span class="value" id="statAvgDuration">-</span>
                </div>
                <div class="hero-panel-item">
                    <span class="label">Son Güncelleme</span>
                    <span class="value" id="statLastUpdate">-</span>
                </div>
            </div>
        </section>

        <section class="info-section">
            <div class="section-header">
                <div>
                    <h2>Deneme Sistemi Nasıl Çalışır?</h2>
                    <p class="text-muted">Admin panelindeki otomatik deneme üreticisinin adımlarını özetledik.</p>
                </div>
            </div>
            <div class="info-grid">
                <div class="info-card">
                    <h3>1) Aktif Havuz Taraması</h3>
                    <p>Yayın durumundaki tüm sorular sistem tarafından çekilir ve mevzuat kodlarına göre gruplanır.</p>
                </div>
                <div class="info-card">
                    <h3>2) Şablon Dağılımı</h3>
                    <p>Her kanun için belirlenen soru sayısı rastgele seçilir. Eksik kalan konular raporlanır.</p>
                </div>
                <div class="info-card">
                    <h3>3) 80 Soruya Tamamlama</h3>
                    <p>Şablondan gelen 75 soru tamamlandıktan sonra sistem kalan 5 soruyu havuzdan dengeli biçimde
                        ekler.</p>
                </div>
                <div class="info-card">
                    <h3>4) Snapshot ve Yayın</h3>
                    <p>Seçilen sorular sınava kilitlenir ve yayınlanır. Böylece sınav boyunca soru seti sabit kalır.</p>
                </div>
            </div>
        </section>

        <section class="info-section">
            <div class="section-header">
                <div>
                    <h2>Deneme Formatı</h2>
                    <p class="text-muted">Sınav deneyimini önceden bilin, stratejinizi planlayın.</p>
                </div>
            </div>
            <div class="pill-list">
                <span class="pill">80 Soru / Otomatik Şablon</span>
                <span class="pill">Süre: Ortalama 100 dk</span>
                <span class="pill">Puanlama: Doğru / Toplam</span>
                <span class="pill">Sınav bitince çözümler açılır</span>
                <span class="pill">Sonuçlar analiz ekranına kaydedilir</span>
            </div>
        </section>

        <section id="examListSection" class="exam-list-section">
            <div class="section-header">
                <div>
                    <h2>Yayınlanan Denemeler</h2>
                    <p class="text-muted">Seviyene uygun denemeyi seç, gerçek sınav temposunu yakala.</p>
                </div>
                <div class="filter-bar">
                    <div class="filter-field">
                        <label for="examSearch" class="text-muted small">Başlıkta ara</label>
                        <input id="examSearch" type="search" placeholder="Örn: 2025 Genel Deneme">
                    </div>
                    <div class="filter-field">
                        <label for="roleFilter" class="text-muted small">Ünvan</label>
                        <select id="roleFilter">
                            <option value="all">Tümü</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="examCountNote" class="text-muted small"></div>
            <div id="examsGrid" class="exam-grid"></div>
        </section>
    </div>
</body>

</html>
