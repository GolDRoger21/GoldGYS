<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Akıllı Soru Yükleme - Admin Paneli</title>
    <link rel="stylesheet" href="../css/admin.css">
    <style>
        /* Admin.css değişkenlerini kullanan modern stil */
        body { margin: 0; padding: 0; background: var(--bg-main); color: var(--text-main); font-family: 'Inter', sans-serif; }
        .section-header p { margin-bottom: 0px; }
        .btn-guide { background: var(--bg-panel); color: var(--text-muted); border: 1px solid var(--border-color); }
        .btn-guide:hover { background: var(--bg-hover); color: var(--text-main); }
        .border-dashed { transition: all 0.2s; }
        .border-dashed:hover { border-color: var(--primary-color) !important; background: rgba(var(--primary-rgb), 0.05); }

        /* Preview Table Styles */
        .table-responsive::-webkit-scrollbar { width: 8px; height: 8px; }
        .table-responsive::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 4px; }
        .preview-card { border: 1px solid var(--border-color); box-shadow: 0 12px 32px rgba(15, 23, 42, 0.08); }
        .preview-toolbar { gap: 0.75rem; }
        .preview-toolbar .toolbar-group { display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; }
        .preview-stats { display: flex; gap: 0.75rem; flex-wrap: wrap; }
        .preview-stat { background: var(--bg-panel); border: 1px solid var(--border-color); border-radius: 10px; padding: 6px 10px; font-size: 0.8rem; color: var(--text-muted); }
        .preview-stat strong { color: var(--text-main); margin-right: 4px; }
        .table thead th { background: var(--bg-panel); border-bottom: 1px solid var(--border-color); }
        .table tbody tr:hover { background: rgba(var(--primary-rgb), 0.04); }
        .question-cell { min-width: 260px; }
        .question-meta { color: var(--text-muted); font-size: 0.75rem; margin-top: 4px; }
        .status-pill { border-radius: 999px; padding: 4px 10px; font-size: 0.75rem; font-weight: 600; display: inline-flex; align-items: center; gap: 4px; }
        .status-pill.pending { background: rgba(245, 158, 11, 0.12); color: #f59e0b; border: 1px solid rgba(245, 158, 11, 0.4); }
        .status-pill.approved { background: rgba(16, 185, 129, 0.12); color: #10b981; border: 1px solid rgba(16, 185, 129, 0.4); }
        .status-pill.review { background: rgba(59, 130, 246, 0.12); color: #3b82f6; border: 1px solid rgba(59, 130, 246, 0.4); }
        .control-buttons { display: inline-flex; gap: 6px; }
        .control-buttons .btn { padding: 2px 8px; font-size: 0.75rem; }
        .filter-select { min-width: 160px; }
        .search-input { min-width: 220px; }
        .preview-modal-body { display: grid; gap: 12px; }
        .preview-section { background: var(--bg-panel); border: 1px solid var(--border-color); border-radius: 10px; padding: 12px; }
        .preview-section h6 { margin: 0 0 6px; font-size: 0.85rem; color: var(--text-muted); }
        
        /* Badges */
        .badge.bg-secondary { background: #475569; color: #fff; }
        .badge.bg-success { background: #10b981; color: #fff; }
        .badge.bg-warning { background: #f59e0b; color: #000; }
        .badge.bg-danger { background: #ef4444; color: #fff; }
    </style>
</head>
<body>

    <!-- Sidebar (Admin panel yapısına uygun olarak JS tarafından yüklenebilir veya statik kalabilir, şimdilik içerik odaklı) -->
    <div class="admin-wrapper">
        <!-- Main Content -->
        <main class="main-content" style="padding: 2rem;">
            <div id="section-importer">
                <!-- JS tarafından doldurulacak -->
                <div class="text-center p-5">
                    <div class="spinner-border text-primary" role="status"></div>
                    <p class="mt-3 text-muted">Yükleyici modülü başlatılıyor...</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Firebase Scripts -->
    <script type="module">
        import { initImporterPage } from '../js/modules/admin/importer.js';
        import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { auth } from '../js/firebase-config.js';

        // Yetki Kontrolü ve Başlatma
        document.addEventListener('DOMContentLoaded', () => {
            onAuthStateChanged(auth, user => {
                if (user) {
                    // Admin yetkisi kontrolü eklenebilir (claims)
                    initImporterPage();
                } else {
                    document.body.innerHTML = '<div class="text-center p-5"><h3>Erişim Reddedildi</h3><p>Lütfen admin girişi yapınız.</p><a href="/admin/login.html">Giriş Yap</a></div>';
                }
            });
        });
    </script>
</body>
</html>
