<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kullanıcı Rolleri | GOLD GYS</title>
  <link rel="stylesheet" href="/css/app.css">
</head>
<body>
  <div class="app-layout">
    <aside id="sidebar-area" class="app-sidebar"></aside>

    <main class="app-main">
      <header id="header-area" class="app-header"></header>

      <div class="app-content">
        <div class="section-header">
          <div>
            <p class="section-eyebrow">Yönetici İşlemleri</p>
            <h1 class="section-title">Üyelik Yönetimi</h1>
            <p class="section-subtitle">Üyeleri inceleyin, yetkilendirin ve gerektiğinde üyeliklerini yönetin.</p>
          </div>
          <div class="section-actions">
            <button id="refreshUsers" class="btn-navy">↻ Yenile</button>
          </div>
        </div>

        <div class="card-grid stats-grid">
          <div class="card stat-card">
            <p class="stat-label">Toplam Üye</p>
            <p class="stat-value" id="totalCount">-</p>
          </div>
          <div class="card stat-card">
            <p class="stat-label">Aktif</p>
            <p class="stat-value" id="activeCount">-</p>
          </div>
          <div class="card stat-card">
            <p class="stat-label">Onay Bekleyen</p>
            <p class="stat-value" id="pendingCount">-</p>
          </div>
          <div class="card stat-card">
            <p class="stat-label">Reddedilen/Silinmiş</p>
            <p class="stat-value" id="rejectedCount">-</p>
          </div>
        </div>

        <div class="grid two-columns">
          <div class="card">
            <div class="card-header">
              <div>
                <h2>Kullanıcılar</h2>
                <p class="card-subtitle">Üyeleri statü, rol veya isme göre filtreleyip seçin.</p>
              </div>
              <div class="input-group">
                <input type="search" id="userSearch" class="input" placeholder="İsim veya e-posta ara">
              </div>
            </div>
            <div class="card-body">
              <div id="userNotice" class="alert" style="display: none;"></div>
              <div class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Ad Soyad</th>
                      <th>E-posta</th>
                      <th>Durum</th>
                      <th>Rol</th>
                      <th>Son Giriş</th>
                      <th>İşlem</th>
                    </tr>
                  </thead>
                  <tbody id="userTableBody">
                    <tr>
                      <td colspan="6">Kullanıcılar yükleniyor...</td>
                    </tr>
                  </tbody>
                </table>
                <div class="table-footer">
                  <button id="loadMoreUsers" class="btn-secondary" style="display:none;">Daha Fazla Yükle</button>
                  <div id="userLazyLoader" aria-hidden="true" style="height: 1px;"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="card" id="userDetailCard">
            <div class="card-header">
              <div>
                <p class="section-eyebrow">Üye Detayı</p>
                <h3 id="detailName">Bir kullanıcı seçin</h3>
                <p class="card-subtitle">Rol, statü ve diğer bilgileri görüntüleyip güncelleyin.</p>
              </div>
              <span id="detailStatus" class="status-chip">-</span>
            </div>

            <div class="card-body" id="userDetailBody">
              <p id="detailPlaceholder">Listeden bir kullanıcı seçerek ayrıntıları görüntüleyin.</p>

              <div id="detailContent" style="display: none;" class="detail-content">
                <div class="detail-meta">
                  <div>
                    <p class="meta-label">E-posta</p>
                    <p class="meta-value" id="detailEmail">-</p>
                  </div>
                  <div>
                    <p class="meta-label">UID</p>
                    <p class="meta-value" id="detailUid">-</p>
                  </div>
                  <div>
                    <p class="meta-label">Roller</p>
                    <p class="meta-value" id="detailRoles">-</p>
                  </div>
                  <div>
                    <p class="meta-label">Son Giriş</p>
                    <p class="meta-value" id="detailLastLogin">-</p>
                  </div>
                </div>

                <div class="form-grid">
                  <div class="form-control">
                    <label for="statusSelect">Statü</label>
                    <select id="statusSelect" class="select">
                      <option value="active">Aktif</option>
                      <option value="pending">Beklemede</option>
                      <option value="rejected">Reddedildi</option>
                      <option value="suspended">Askıya Alındı</option>
                    </select>
                  </div>
                  <div class="form-control">
                    <label for="primaryRoleSelect">Ana Rol</label>
                    <select id="primaryRoleSelect" class="select">
                      <option value="student">Student</option>
                      <option value="editor">Editor</option>
                      <option value="admin">Admin</option>
                    </select>
                  </div>
                </div>

                <div class="form-control">
                  <label>Ek Roller</label>
                  <div class="chip-group" id="roleChips">
                    <label class="chip"><input type="checkbox" value="student"> Öğrenci</label>
                    <label class="chip"><input type="checkbox" value="editor"> Editör</label>
                    <label class="chip"><input type="checkbox" value="admin"> Admin</label>
                  </div>
                </div>

                <div class="button-row">
                  <button id="saveProfile" class="btn-gold">Kaydet</button>
                  <button id="refreshClaims" class="btn-secondary">Yetkileri Yenile</button>
                  <button id="deleteUser" class="btn-danger">Üyeliği Sil</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script type="module" src="/js/modules/admin/users.js"></script>
</body>
</html>
