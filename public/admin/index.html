<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YÃ¶netim Paneli | GOLD GYS</title>

    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="../styles/tokens.css">
    <link rel="stylesheet" href="../css/app.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/admin.css">

    <link rel="icon" type="image/png" href="../icons/favicon.png">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* Sayfa yÃ¼klenirken beyaz ekran sorunu yaÅŸamamak iÃ§in */
        body {
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        body.loaded {
            opacity: 1;
        }
    </style>
</head>

<body class="admin-body">

    <div id="pageLoader"
        style="position:fixed; inset:0; background:#fff; z-index:99999; display:flex; justify-content:center; align-items:center;">
        <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
            <span class="visually-hidden">YÃ¼kleniyor...</span>
        </div>
    </div>

    <script type="module">
        import { initLayout } from '../js/ui-loader.js';
        document.addEventListener('DOMContentLoaded', async () => {
            await initLayout(); // Header ve Sidebar'Ä± yÃ¼kler
            document.body.classList.add('loaded'); // SayfayÄ± gÃ¶ster
            document.getElementById('pageLoader').style.display = 'none'; // Loader'Ä± gizle
        });
    </script>

    <div class="admin-layout">

        <main class="content">

            <div id="mainContainer">

                <section id="section-dashboard" class="admin-section">
                    <div class="dashboard-header">
                        <div>
                            <h2>Genel BakÄ±ÅŸ</h2>
                            <p class="text-muted">Sistem durumunu ve son aktiviteleri buradan takip edebilirsiniz.</p>
                        </div>
                        <div class="date-display" id="currentDateDisplay"></div>
                    </div>

                    <div class="stats-grid" id="statsGrid">
                        <div class="card p-4">
                            <p>Ä°statistikler yÃ¼kleniyor...</p>
                        </div>
                    </div>

                    <div class="dashboard-overview-grid">
                        <div class="overview-main">
                            <div class="card chart-card">
                                <div class="card-header">
                                    <div>
                                        <h3>ğŸ“ˆ Son 7 GÃ¼n Ãœye KatÄ±lÄ±mÄ±</h3>
                                        <p class="text-muted">Yeni kayÄ±t trendini gÃ¼nlÃ¼k olarak takip edin.</p>
                                    </div>
                                    <span class="badge badge-secondary">GÃ¼nlÃ¼k</span>
                                </div>
                                <div class="chart-wrapper"><canvas id="usersChart"></canvas></div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <div>
                                        <h3>ğŸ§‘â€ğŸ’» Son Ãœyeler</h3>
                                        <p class="text-muted">AramÄ±za katÄ±lan en yeni kullanÄ±cÄ±lar.</p>
                                    </div>
                                    <button class="btn btn-secondary btn-sm" onclick="window.location.hash='users'">TÃ¼mÃ¼</button>
                                </div>
                                <div class="table-responsive">
                                    <table class="admin-table compact-table">
                                        <thead>
                                            <tr>
                                                <th>KullanÄ±cÄ±</th>
                                                <th>E-Posta</th>
                                                <th>Tarih</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recentUsersTable"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="overview-side">
                            <div class="card overview-quick-actions">
                                <h3>âš¡ HÄ±zlÄ± Ä°ÅŸlemler</h3>
                                <p class="text-muted">SÄ±k kullanÄ±lan yÃ¶netim aksiyonlarÄ±na tek tÄ±kla eriÅŸin.</p>
                                <div class="action-buttons">
                                    <button onclick="window.location.hash='topics'" class="btn-action">ğŸ“‘ Ä°Ã§erik
                                        StÃ¼dyosu</button>
                                    <button onclick="window.location.hash='content'" class="btn-action">ğŸ“š Soru
                                        BankasÄ±</button>
                                    <button onclick="window.location.hash='reports'" class="btn-action">ğŸš© Bildirimleri
                                        Ä°ncele</button>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <div>
                                        <h3>ğŸš© Son Bildirimler</h3>
                                        <p class="text-muted">Son raporlanan iÃ§erikler ve durumlarÄ±.</p>
                                    </div>
                                    <button class="btn btn-secondary btn-sm" onclick="window.location.hash='reports'">TÃ¼mÃ¼nÃ¼ gÃ¶r</button>
                                </div>
                                <div class="table-responsive">
                                    <table class="admin-table compact-table">
                                        <thead>
                                            <tr>
                                                <th>TÃ¼r</th>
                                                <th>AÃ§Ä±klama</th>
                                                <th>Durum</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recentReportsTable"></tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="card system-health">
                                <h3>ğŸŸ¢ Sistem Ã–zeti</h3>
                                <ul class="status-list">
                                    <li><span class="status-dot status-success"></span>Sunucu ve hizmetler aktif</li>
                                    <li><span class="status-dot status-info"></span>Yedekleme son 6 saat iÃ§inde alÄ±ndÄ±</li>
                                    <li><span class="status-dot status-warning"></span>Bildirim kuyruÄŸunu kontrol edin</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="section-users" class="admin-section" style="display:none;">
                    <div class="section-header">
                        <h2>ğŸ‘¥ Ãœye YÃ¶netimi</h2>
                    </div>
                    <div id="usersTableContainer" class="card p-0">
                        <div class="p-4">YÃ¼kleniyor...</div>
                    </div>
                </section>

                <section id="section-topics" class="admin-section" style="display:none;">
                    <div class="text-center p-5">
                        <div class="spinner-border text-primary" role="status"></div>
                        <p class="mt-2 text-muted">StÃ¼dyo YÃ¼kleniyor...</p>
                    </div>
                </section>

                <section id="section-content" class="admin-section" style="display:none;">
                    <div class="section-header">
                        <h2>ğŸ“š Soru BankasÄ±</h2>
                    </div>
                    <div class="card p-0">
                        <div class="table-responsive">
                            <table class="admin-table">
                                <tbody id="questionsTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <section id="section-exams" class="admin-section" style="display:none;">
                    <div class="section-header">
                        <h2>ğŸ“ Deneme SÄ±navlarÄ±</h2>
                    </div>
                    <div class="card p-4 text-center text-muted">Deneme modÃ¼lÃ¼ hazÄ±rlanÄ±yor...</div>
                </section>

                <section id="section-announcements" class="admin-section admin-only" style="display:none;">
                    <div class="section-header">
                        <h2>ğŸ“£ SÄ±nav Ä°lanÄ± & Duyurular</h2>
                        <p class="text-muted">SÄ±nav ilanlarÄ±nÄ± ve duyurularÄ± burada yÃ¶netin.</p>
                    </div>
                    <div class="card p-4 text-center text-muted">ModÃ¼l yÃ¼kleniyor...</div>
                </section>

                <section id="section-importer" class="admin-section" style="display:none;">
                    <div class="section-header">
                        <h2>ğŸ“¥ Toplu Ä°Ã§e Aktar</h2>
                    </div>
                    <div class="card p-4">JSON/Excel yÃ¼kleme alanÄ±...</div>
                </section>

                <section id="section-reports" class="admin-section" style="display:none;">
                    <div class="section-header">
                        <h2>ğŸš© Hata Bildirimleri</h2>
                    </div>
                    <div id="reportsList" class="card p-0"></div>
                </section>

                <section id="section-trash" class="admin-section" style="display:none;">
                    <div class="section-header">
                        <h2>ğŸ—‘ï¸ Ã‡Ã¶p Kutusu</h2>
                        <p class="text-muted">Silinen iÃ§erikleri filtreleyin, geri alÄ±n veya kalÄ±cÄ± olarak silin.</p>
                    </div>
                    <div class="card p-0">
                        <div class="p-3 border-bottom d-flex flex-wrap gap-2 align-items-center justify-content-between">
                            <div class="d-flex flex-wrap gap-2 align-items-center">
                                <input type="text" id="trashCenterSearch" class="form-control form-control-sm" placeholder="BaÅŸlÄ±kta veya konu adÄ±nda ara...">
                                <select id="trashCenterTypeFilter" class="form-select form-select-sm">
                                    <option value="all">TÃ¼mÃ¼</option>
                                    <option value="topic">Konular</option>
                                    <option value="lesson">Dersler</option>
                                    <option value="test">Testler</option>
                                </select>
                            </div>
                            <div class="d-flex flex-wrap gap-2">
                                <button class="btn btn-outline-secondary btn-sm" id="trashCenterRefreshBtn">Yenile</button>
                                <button class="btn btn-outline-success btn-sm" id="trashCenterRestoreSelected">SeÃ§ileni Geri Al</button>
                                <button class="btn btn-danger btn-sm" id="trashCenterPurgeSelected">SeÃ§ileni Sil</button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th style="width:36px;"><input type="checkbox" id="trashCenterSelectAll"></th>
                                        <th>BaÅŸlÄ±k</th>
                                        <th>Konu</th>
                                        <th>TÃ¼r</th>
                                        <th class="text-end">Ä°ÅŸlem</th>
                                    </tr>
                                </thead>
                                <tbody id="trashCenterTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </section>

            </div>
        </main>
    </div>

    <script type="module" src="../js/admin-page.js"></script>

</body>

</html>
